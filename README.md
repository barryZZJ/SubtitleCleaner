# 程序下载

在[Releases](https://github.com/barryZZJ/SubtitleCleaner/releases)页面选择最新版本的程序下载。

# FullwidthConverter / 全角片假名转换器

可以将半角片假名及`｡` `｢` `｣` `､` `･`等符号转换为全角形式

## 使用方法

1. 将待转换文件直接拖放到本程序上即可。

2. 也可以使用命令行进行更多配置：
   - `InputFile`：设置待处理文件名
   - `-o FILE, --output FILE`：设置输出文件名，默认为`<输入文件名>_out.txt`。
   - `-q, --quit`：结束后不暂停程序直接退出，方便命令行调用。不加该参数程序结束时会暂停。
   - `--log`：记录日志，把执行结果输出到`<输入文件名>_log.txt`

## TODO List

- [ ] 制作GUI界面

---
# SubCleaner / 字幕清理器

输入`.ass`字幕文件，提取对话文本（跳过样式为Rubi的注音台词），进行处理后输出为文本文件，具体处理内容如下：

1. 台词合并：
   - 对连续多行对白**包含以下配对符号**的进行合并，用全角空格隔开(并删除该符号)：
     `《》` `<>` `＜＞` `〈〉` `「」`(不删除) `｢｣`(不删除)
   - 以`→`结尾的对白，和下一行合并，并用全角空格隔开(并删除该符号)。
   - ~~对连续多行对白的**开始和结束时间相同**的进行合并，并(只有有效对白才)用半角空格隔开~~（多数情况下为不同说话人，故去掉）
2. 台词清理：
   - 直接删除：`…` `｡`(半角) `。`(全角) `！` `~` `～` `∼` `(...)` `[...]` `{...}` `\N` `空行`
   - `、` `､`替换为半角空格
   - 每一行开头添加`\N`
3. 假名转换
   - 每一行使用前述的片假名转换器`FullWidthConverter`处理半角平假名

## 使用方法

1. 将`.ass`文件直接拖放到本程序上即可。

2. 也可以使用命令行进行更多配置：
   - `InputFile`：设置待处理文件名
   - `-o FILE, --output FILE`：设置输出文件名，默认为`<输入文件名>.txt`
   - `-q, --quit`：结束后不暂停程序直接退出，方便命令行调用。不加该参数程序结束时会暂停
   - `--log`：记录日志，把执行结果输出到`<输入文件名>_log.txt`


## TODO List

- [ ] 制作GUI界面

---

# Caption2Txt.bat

根据ts生成清理后的台词文本文件。

使用方法：拖入ts文件，会先生成ass，然后生成处理后的txt文件。

注意：必须把本脚本与Caption2Ass_PCR.exe、SubCleaner.exe放在同一目录下才能正常工作！

by 谢耳朵w v1.0

# 提出修改建议 / 运行时的错误和BUG

请给我提出[Issue](https://github.com/barryZZJ/SubtitleCleaner/issues)，看到后我会及时处理。

# Changelog

## FullwidthConverter

- v1.0.2
  - 添加`-q, --quit` `--log`参数，方便命令行调用

- v1.0.1
  - 优化直接运行程序时的提示

- v1.0
  - 实现基本功能
  - 支持UTF-8 (with BOM)、GBK编码格式文件
  - 一次只支持单个文件

## SubCleaner

- v2.3.0
  - 改进台词合并的规则
  - 跳过Rubi(注音)的台词

- v2.2.0
  - 优化输出内容（存在bug：时间相同的台词合并时也会以全角空格隔开）

- v2.1.0
  - 新增几对合并标志符号，优化输出内容

- v2.0.0
  - 修改台词合并逻辑
  - 修复合并及清理时的一些bug
  - 修改默认输出文件名为`<输入文件名>.txt`
  - 添加`-q, --quit` `--log`参数，方便命令行调用

- v1.0.1
  - 优化直接运行程序时的提示

- v1.0
  - 实现基本功能 
  - 一次只支持单个文件
